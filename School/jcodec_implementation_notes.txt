JCodec Implementation Notes
===========================

Current Status: 
- Pure Java MP4 generation is working and allows the project to compile
- JCodec implementation was causing compilation errors due to API version incompatibilities
- The current JCodec version (0.2.3) has different API signatures than expected

JCodec Implementation (To be used when API is properly understood):

```java
// Required imports
import org.jcodec.api.SequenceEncoder;
import org.jcodec.common.io.NIOUtils;
import org.jcodec.common.io.SeekableByteChannel;
import org.jcodec.common.model.Rational;
import org.jcodec.common.model.ColorSpace;
import org.jcodec.common.model.Picture;
import org.jcodec.scale.AWTUtil;

// Working JCodec method (to replace the pure Java implementation)
private void generateVideoWithJCodec(Path outputPath, String csvContent) throws Exception {
    int width = 1280;
    int height = 720;
    int fps = 25;

    // Parse CSV lignes
    String[] lines = csvContent.split("\n");
    int headerOffset = lines.length > 0 ? 1 : 0;
    int dataLines = Math.max(0, lines.length - headerOffset);

    // Nombre de frames max
    int N_FRAMES_MAX = 150;
    int framesToGenerate = Math.min(dataLines, N_FRAMES_MAX);
    if (framesToGenerate == 0) {
        framesToGenerate = 30; // minimum frames
    }

    File outFile = outputPath.toFile();
    if (outFile.exists()) {
        outFile.delete();
    }

    // Correct JCodec API usage
    try (SeekableByteChannel channel = NIOUtils.writableFileChannel(outFile.toPath())) {
        SequenceEncoder encoder = SequenceEncoder.createSequenceEncoder(channel, width, height, fps);
        
        for (int i = 0; i < framesToGenerate; i++) {
            String row = (i + headerOffset < lines.length) ? lines[i + headerOffset] : "";
            
            BufferedImage frame = renderFrame(width, height, i, row);
            
            // Convert BufferedImage to Picture
            Picture pic = AWTUtil.fromBufferedImage(frame, ColorSpace.RGB);
            encoder.encodeNativeFrame(pic);
        }
    }

    System.out.println("âœ… JCodec video written to: " + outputPath);
}
```

Alternative approach with different JCodec version:
- Consider upgrading to JCodec 0.2.5 or later for better API stability
- Maven dependency: 
```xml
<dependency>
    <groupId>org.jcodec</groupId>
    <artifactId>jcodec</artifactId>
    <version>0.2.5</version>
</dependency>
```

Steps to properly implement JCodec:
1. First verify the correct API for the JCodec version in use
2. Test with a simple example outside the main application
3. Gradually integrate the working JCodec code
4. Remove the pure Java implementation once JCodec is working properly

Current working implementation in CsvVideoController uses pure Java MP4 generation that creates valid MP4 files without external dependencies.