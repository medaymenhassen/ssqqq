<div class="lesson-detail-container">
  <div class="lesson-header">
    <button class="btn btn-secondary" (click)="onBack()">Back to Lessons</button>
    <button class="btn btn-primary" (click)="onEdit()" *ngIf="lesson">Edit Lesson</button>
  </div>

  <div class="lesson-content" *ngIf="!loading && !error && lesson">
    <h1 class="lesson-title">{{ lesson.title }}</h1>
    
    <div class="lesson-info">
      <p><strong>Order:</strong> {{ lesson.lessonOrder }}</p>
      <p><strong>Created:</strong> {{ lesson.createdAt | date }}</p>
      <p><strong>Updated:</strong> {{ lesson.updatedAt | date }}</p>
    </div>

    <div class="lesson-description" *ngIf="lesson.description">
      <h2>Description</h2>
      <div class="processed-content" [innerHTML]="processedDescription"></div>
    </div>

    <div class="lesson-content-section" *ngIf="lesson.contentTitle || lesson.contentDescription">
      <h2 *ngIf="lesson.contentTitle">{{ lesson.contentTitle }}</h2>
      <div class="processed-content" [innerHTML]="processedContentDescription" *ngIf="lesson.contentDescription"></div>
    </div>

    <div class="lesson-media" *ngIf="lesson.videoUrl || lesson.animation3dUrl">
      <div class="video-section" *ngIf="lesson.videoUrl">
        <h3>Video Content</h3>
        <video [src]="lesson.videoUrl" controls width="100%"></video>
      </div>

      <div class="animation-section" *ngIf="lesson.animation3dUrl">
        <h3>3D Animation</h3>
        <iframe [src]="lesson.animation3dUrl" width="100%" height="400px"></iframe>
      </div>
    </div>
  </div>

  <div class="loading" *ngIf="loading">
    <p>Loading lesson...</p>
  </div>

  <div class="error" *ngIf="error">
    <p>{{ error }}</p>
    <button class="btn btn-primary" (click)="loadCourseLesson(lesson?.id || 0)">Retry</button>
  </div>
</div>