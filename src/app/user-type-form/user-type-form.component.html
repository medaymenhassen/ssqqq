<div class="user-type-form-container">
  <h2>{{ isEditMode ? 'Modifier le Type d\'Utilisateur' : 'Créer un Type d\'Utilisateur' }}</h2>

  <div class="loading" *ngIf="loading && isEditMode">
    <div class="spinner-border" role="status">
      <span class="sr-only">Chargement...</span>
    </div>
  </div>

  <div class="error" *ngIf="error">
    <div class="alert alert-danger">{{ error }}</div>
  </div>

  <form [formGroup]="userTypeForm" (ngSubmit)="onSubmit()" class="user-type-form" *ngIf="!loading || !isEditMode">
    <div class="form-group">
      <label for="nameFr">Nom Français *</label>
      <input 
        type="text" 
        id="nameFr" 
        formControlName="nameFr" 
        class="form-control" 
        [class.is-invalid]="userTypeForm.get('nameFr')?.invalid && userTypeForm.get('nameFr')?.touched"
        placeholder="Entrez le nom français du type d'utilisateur">
      <div class="invalid-feedback" *ngIf="userTypeForm.get('nameFr')?.invalid && userTypeForm.get('nameFr')?.touched">
        <div *ngIf="userTypeForm.get('nameFr')?.errors?.['required']">Le nom français est requis.</div>
        <div *ngIf="userTypeForm.get('nameFr')?.errors?.['minlength']">Le nom français doit contenir au moins 2 caractères.</div>
      </div>
    </div>
    
    <div class="form-group">
      <label for="nameEn">Nom Anglais *</label>
      <input 
        type="text" 
        id="nameEn" 
        formControlName="nameEn" 
        class="form-control" 
        [class.is-invalid]="userTypeForm.get('nameEn')?.invalid && userTypeForm.get('nameEn')?.touched"
        placeholder="Entrez le nom anglais du type d'utilisateur">
      <div class="invalid-feedback" *ngIf="userTypeForm.get('nameEn')?.invalid && userTypeForm.get('nameEn')?.touched">
        <div *ngIf="userTypeForm.get('nameEn')?.errors?.['required']">Le nom anglais est requis.</div>
        <div *ngIf="userTypeForm.get('nameEn')?.errors?.['minlength']">Le nom anglais doit contenir au moins 2 caractères.</div>
      </div>
    </div>
    
    <div class="form-group">
      <label for="descFr">Description Française</label>
      <textarea 
        id="descFr" 
        formControlName="descFr" 
        class="form-control" 
        [class.is-invalid]="userTypeForm.get('descFr')?.invalid && userTypeForm.get('descFr')?.touched"
        placeholder="Entrez une description en français (optionnel)" 
        rows="4"></textarea>
      <div class="invalid-feedback" *ngIf="userTypeForm.get('descFr')?.invalid && userTypeForm.get('descFr')?.touched">
        <div *ngIf="userTypeForm.get('descFr')?.errors?.['maxlength']">La description française ne doit pas dépasser 500 caractères.</div>
      </div>
    </div>
    
    <div class="form-group">
      <label for="descEn">Description Anglaise</label>
      <textarea 
        id="descEn" 
        formControlName="descEn" 
        class="form-control" 
        [class.is-invalid]="userTypeForm.get('descEn')?.invalid && userTypeForm.get('descEn')?.touched"
        placeholder="Entrez une description en anglais (optionnel)" 
        rows="4"></textarea>
      <div class="invalid-feedback" *ngIf="userTypeForm.get('descEn')?.invalid && userTypeForm.get('descEn')?.touched">
        <div *ngIf="userTypeForm.get('descEn')?.errors?.['maxlength']">La description anglaise ne doit pas dépasser 500 caractères.</div>
      </div>
    </div>
    
    <div class="form-group">
      <label for="bigger">Taille</label>
      <select 
        id="bigger" 
        formControlName="bigger" 
        class="form-control">
        <option value="freelance">Freelance</option>
        <option value="individual">Individual</option>
        <option value="company">Company</option>
      </select>
    </div>
    
    <div class="form-actions">
      <button 
        type="button" 
        class="btn btn-secondary" 
        (click)="onCancel()">
        Annuler
      </button>
      <button 
        type="submit" 
        class="btn btn-primary" 
        [disabled]="userTypeForm.invalid || loading">
        <span *ngIf="loading" class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
        {{ isEditMode ? (loading ? 'Modification...' : 'Modifier') : (loading ? 'Création...' : 'Créer') }}
      </button>
    </div>
  </form>
</div>