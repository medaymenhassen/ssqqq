<div class="offer-list-container">
  <div class="header">
    <h2>Available Offers</h2>
    <div>
      <button class="btn btn-secondary" (click)="forceRefresh()" style="margin-right: 10px;">Force Refresh</button>
      <button class="btn btn-primary" (click)="createOffer()">Create New Offer</button>
    </div>
  </div>
  
  <div *ngIf="loading" class="loading">
    Loading offers...
  </div>
  
  <div *ngIf="error" class="error">
    {{ error }}
  </div>
  
  <div *ngIf="!loading && offers.length === 0" class="no-offers">
    No offers available at the moment.
  </div>
  
  <div class="offers-grid" *ngIf="!loading && offers.length > 0">
    <div class="offer-card" *ngFor="let offer of offers">
      <h3>{{ offer.title }}</h3>
      <p class="offer-description">{{ offer.description }}</p>
      <div class="offer-details">
        <p><strong>Price:</strong> ${{ offer.price }}</p>
        <p><strong>Duration:</strong> {{ offer.durationHours }} hours</p>
      </div>
      <div class="offer-actions">
        <button 
          class="btn btn-secondary" 
          (click)="editOffer(offer.id)">
          Edit
        </button>
        <button 
          class="btn btn-danger" 
          (click)="deleteOffer(offer.id)">
          Delete
        </button>
        <button 
          [class]="getButtonClass(offer.id)"
          (click)="purchaseOffer(offer.id)"
          [disabled]="isPurchasing || isButtonDisabled(offer.id)">
          {{ isPurchasing ? 'Processing...' : getButtonText(offer.id) }}
        </button>
      </div>
    </div>
  </div>
  
  <!-- User's Offers Section -->
  <div class="user-offers-section" *ngIf="userId">
    <h3>Your Offers</h3>
    
    <div *ngIf="userOffersLoading" class="loading">
      Loading your offers...
    </div>
    
    <div *ngIf="!userOffersLoading && userOffers.length === 0" class="no-offers">
      You haven't purchased any offers yet.
    </div>
    
    <div class="user-offers-grid" *ngIf="!userOffersLoading && userOffers.length > 0">
      <div class="user-offer-card" *ngFor="let userOffer of userOffers">
        <div class="user-offer-header">
          <h4>Offer #{{ userOffer.offerId }}</h4>
          <span class="status-badge" [class]="getStatusClass(userOffer.approvalStatus)">{{ userOffer.approvalStatus }}</span>
        </div>
        
        <div class="user-offer-details">
          <p><strong>Purchase Date:</strong> {{ userOffer.purchaseDate | date }}</p>
          <p><strong>Expiration:</strong> {{ userOffer.expirationDate | date }}</p>
          <p><strong>Active:</strong> {{ userOffer.isActive ? 'Yes' : 'No' }}</p>
        </div>
        
        <div class="user-offer-actions" *ngIf="userOffer.isActive">
          <button class="btn btn-success" (click)="goToLessons()">Access Content</button>
        </div>
      </div>
    </div>
  </div>
</div>